import './polyfills.server.mjs';
import{a as oe}from"./chunk-6IRC5T3T.mjs";import{a as ae}from"./chunk-7UXGEFHX.mjs";import{b as Y,c as C,d as J,e as K,g as W,k as X,l as Z,p as ee,r as te,t as ie}from"./chunk-SEX4FTRS.mjs";import{a as re}from"./chunk-25GN7LD3.mjs";import{a as ne}from"./chunk-STSOJLVA.mjs";import{a as y}from"./chunk-O7L3E3EA.mjs";import{Aa as b,B as p,C as c,Cb as H,Ia as F,Lb as k,V as u,_ as P,ca as d,ea as s,ga as M,gb as O,ha as q,ia as L,ib as $,ja as o,jb as G,ka as n,la as f,ma as x,mb as B,na as w,pa as I,q as U,qa as g,r as v,ra as _,sb as Q,u as h,va as R,wa as j,x as V,xa as z,y as S,za as a}from"./chunk-Q2DPBFOB.mjs";import"./chunk-5XUXGTUW.mjs";var D=class i{constructor(){}http=h(Q);apiUrl=y.apiUrl;getAllListData(e){return this.http.post(this.apiUrl+"/api/User/ListAsync",e)}addData(e){return this.http.post(this.apiUrl+"/api/User/AddAsync",e)}getUpdateData(e){return this.http.get(this.apiUrl+`/api/User/GetById/${e}`)}updateData(e,t){return this.http.post(y.apiUrl+`/api/User/EditAsync/${e}`,t)}deleteData(e){return this.http.delete(y.apiUrl+`/api/User/Delete/${e}`)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=U({token:i,factory:i.\u0275fac,providedIn:"root"})};var le=["inpChecked"],se=i=>({"background-color":i}),me=i=>({active:i});function pe(i,e){i&1&&(o(0,"small"),a(1," \u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0643\u0627\u0645\u0644 \u0645\u0637\u0644\u0648\u0628"),n())}function ce(i,e){if(i&1&&(x(0),d(1,pe,2,0,"small",8),w()),i&2){let t=_();u(),s("ngIf",t.formData.controls.fullName.hasError("required"))}}function de(i,e){i&1&&(o(0,"small"),a(1,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645 \u0645\u0637\u0644\u0648\u0628"),n())}function fe(i,e){if(i&1&&(x(0),d(1,de,2,0,"small",8),w()),i&2){let t=_();u(),s("ngIf",t.formData.controls.userName.hasError("required"))}}function he(i,e){i&1&&(o(0,"small"),a(1," \u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A \u0645\u0637\u0644\u0648\u0628"),n())}function ge(i,e){i&1&&(o(0,"small"),a(1,"\u0627\u0644\u0631\u062C\u0627\u0621 \u0625\u062F\u062E\u0627\u0644 \u0628\u0631\u064A\u062F \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A \u0635\u062D\u064A\u062D"),n())}function _e(i,e){if(i&1&&(x(0),d(1,he,2,0,"small",8)(2,ge,2,0,"small",8),w()),i&2){let t=_();u(),s("ngIf",t.formData.controls.email.hasError("required")),u(),s("ngIf",t.formData.controls.email.hasError("email"))}}function be(i,e){i&1&&(o(0,"small"),a(1," \u0631\u0642\u0645 \u0627\u0644\u062C\u0648\u0627\u0644 \u0645\u0637\u0644\u0648\u0628"),n())}function Ce(i,e){if(i&1&&(x(0),d(1,be,2,0,"small",8),w()),i&2){let t=_();u(),s("ngIf",t.formData.controls.PhoneNumber.hasError("required"))}}function Ne(i,e){if(i&1){let t=I();o(0,"tr")(1,"th",29),a(2),n(),o(3,"td"),a(4),n(),o(5,"td"),a(6),n(),o(7,"td"),a(8),n(),o(9,"td"),a(10),n(),o(11,"td")(12,"button",30),g("click",function(){let l=p(t).$implicit,m=_();return c(m.getUpdateData(l.userId))}),f(13,"i",31),n(),o(14,"button",32),g("click",function(){let l=p(t).$implicit,m=_();return c(m.DeleteModel(l.userId))}),f(15,"i",33),n()()()}if(i&2){let t=e.$implicit,r=e.$index;u(2),b(r+1),u(2),b(t.userName),u(2),b(t.email),u(2),b(t.phoneNumber),u(2),b(t.isActive?"\u0646\u0634\u0637":"\u063A\u064A\u0631 \u0646\u0634\u0637")}}function xe(i,e){i&1&&(o(0,"tr")(1,"td",34),f(2,"i",35)(3,"br"),a(4," \u0644\u0627 \u062A\u0648\u062C\u062F \u0628\u064A\u0627\u0646\u0627\u062A \u062D\u062A\u0649 \u0627\u0644\u0622\u0646 "),n()())}var A=class i{fb=h(te);toastr=h(ne);NewUserServices=h(D);render=h(P);inpChecked;formData=this.fb.group({userName:["",C.required],fullName:["",C.required],email:["",[C.required,C.email]],PhoneNumber:["",C.required]});subScription;getAllData;userStatus=!0;btnText="Add";idUpdate;pageIndex=1;pageSize=10;show=!1;deleteId;title=h(H);ngOnInit(){this.title.setTitle("\u0645\u0633\u062A\u062E\u062F\u0645 \u062C\u062F\u064A\u062F"),this.getAllListData()}getAllListData(){let e={pageIndex:this.pageIndex,pageSize:this.pageSize};this.subScription=this.NewUserServices.getAllListData(e).subscribe(t=>{this.getAllData=t})}userChange(e){this.userStatus=e.target.checked}onSubmit(){let e=new FormData;e.append("FullName",this.formData.get("fullName")?.value??""),e.append("UserName",this.formData.get("userName")?.value??""),e.append("Email",this.formData.get("email")?.value??""),e.append("PhoneNumber",this.formData.get("PhoneNumber")?.value??""),e.append("isActive",this.userStatus.toString()),console.log("Payload:",e),this.formData.valid?(this.btnText==="Add"?this.subScription=this.NewUserServices.addData(e).subscribe({next:()=>{this.toastr.show("\u062A\u0645 \u0627\u0636\u0627\u0641\u0647 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0628\u0646\u062C\u0627\u062D","success"),this.getAllListData()},error:t=>{if(t.error.errors){let r=t.error.errors;for(let l in r)r[l].forEach(m=>{this.toastr.show(m,"error")})}else this.toastr.show(t.error.message,"error")}}):this.subScription=this.NewUserServices.updateData(this.idUpdate,e).subscribe(()=>{this.toastr.show("\u062A\u0645 \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0628\u0646\u062C\u0627\u062D","success"),this.getAllListData(),this.btnText="Add",this.render.setAttribute(this.inpChecked.nativeElement,"checked","true")}),this.formData.reset()):this.formData.markAllAsTouched()}onClose(){this.show=!1}deleteConfirmed(e){this.subScription=this.NewUserServices.deleteData(this.deleteId).subscribe({next:t=>{this.getAllListData(),this.show=!1,this.toastr.show("\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A","success")},error:t=>{this.toastr.show("\u0644\u0627 \u064A\u0645\u0643\u0646 \u062D\u0630\u0641 \u0627\u0644\u0639\u0646\u0635\u0631 \u0625\u0630\u0627 \u0643\u0627\u0646 \u0628\u0647 \u062D\u0631\u0643\u0627\u062A","error")}})}DeleteModel(e){this.deleteId=e,this.show=!0}resetData(){this.btnText="Add"}getUpdateData(e){this.subScription=this.NewUserServices.getUpdateData(e).subscribe(t=>{this.formData.patchValue({fullName:t.fullName,userName:t.userName,email:t.email,PhoneNumber:t.phoneNumber}),this.userStatus=t.isActive,t.isActive?this.render.setAttribute(this.inpChecked.nativeElement,"checked","true"):this.render.removeAttribute(this.inpChecked.nativeElement,"checked")}),this.idUpdate=e,this.btnText="Update"}ngOnDestroy(){this.subScription&&this.subScription.unsubscribe()}onPageChanged(e){this.pageIndex=e,this.getAllListData()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=V({type:i,selectors:[["app-newuser"]],viewQuery:function(t,r){if(t&1&&R(le,5),t&2){let l;j(l=z())&&(r.inpChecked=l.first)}},decls:63,vars:17,consts:[["inpChecked",""],["appIntersection","fade-in",1,"title-page"],["src","assets/dashboard/iconarrowdouble.png","alt","icon",1,"mx-1"],["appIntersection","fade-in",1,"forms_dashboard",3,"ngSubmit","formGroup"],[1,"row"],[1,"mb-3","col-sm-12","col-md-6","col-lg-3"],["for","fullName",1,"form-label"],["type","text","id","fullName","placeholder","\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0643\u0627\u0645\u0644","formControlName","fullName",1,"form-control"],[4,"ngIf"],["for","userName",1,"form-label"],["type","text","id","userName","placeholder","\u0627\u0644\u0627\u0633\u0645","formControlName","userName",1,"form-control"],["for","email",1,"form-label"],["type","text","id","email","placeholder","\u0627\u0644\u0627\u064A\u0645\u064A\u0644","name","email","formControlName","email",1,"form-control"],["for","phonenumber",1,"form-label"],["type","text","id","phonenumber","placeholder","\u0627\u0644\u0631\u0642\u0645","formControlName","PhoneNumber","maxlength","11",1,"form-control"],[1,"mb-3","col-sm-12","col-md-2"],["for","status",1,"form-label"],[1,"form-check","mt-1","d-flex","align-items-center"],["type","checkbox","id","status","checked","",1,"checkbox",3,"change"],["for","status",1,"form-check-label"],[1,"btn_add_reset"],["type","reset",3,"click"],["type","submit",3,"ngStyle"],["appIntersection","fade-in",1,"table-responsive"],[1,"table","table-striped","mt-4"],["scope","col"],[1,"modal_delete",3,"ngClass"],[3,"toggleModal","onDelete","isVisible","itemId"],[3,"pageChange","totalPages","currentPage"],["scope","row"],[1,"btn","btn-success","ms-3",3,"click"],[1,"fa-solid","fa-pen-to-square"],[1,"btn","btn-danger",3,"click"],[1,"fa-solid","fa-trash"],["colspan","5",1,"text-center","py-5",2,"color","#888","font-size","18px"],[1,"fa-solid","fa-circle-exclamation","fa-2x","mb-2",2,"color","#ccc"]],template:function(t,r){if(t&1){let l=I();o(0,"h3",1),a(1,"\u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0647 "),f(2,"img",2),o(3,"span"),a(4,"\u0645\u0633\u062A\u062E\u062F\u0645 \u062C\u062F\u064A\u062F"),n()(),o(5,"form",3),g("ngSubmit",function(){return p(l),c(r.onSubmit())}),o(6,"div",4)(7,"div",5)(8,"label",6),a(9,"\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0643\u0627\u0645\u0644"),n(),f(10,"input",7),d(11,ce,2,1,"ng-container",8),n(),o(12,"div",5)(13,"label",9),a(14,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645"),n(),f(15,"input",10),d(16,fe,2,1,"ng-container",8),n(),o(17,"div",5)(18,"label",11),a(19,"\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0627\u0644\u0643\u062A\u0631\u0648\u0646\u064A "),n(),f(20,"input",12),d(21,_e,3,2,"ng-container",8),n(),o(22,"div",5)(23,"label",13),a(24,"\u0631\u0642\u0645 \u0627\u0644\u062C\u0648\u0627\u0644"),n(),f(25,"input",14),d(26,Ce,2,1,"ng-container",8),n(),o(27,"div",15)(28,"label",16),a(29,"\u062D\u0627\u0644\u0629 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645"),n(),o(30,"div",17)(31,"input",18,0),g("change",function(N){return p(l),c(r.userChange(N))}),n(),o(33,"label",19),a(34,"\u0646\u0634\u0637"),n()()()(),o(35,"div",20)(36,"button",21),g("click",function(){return p(l),c(r.resetData())}),a(37,"\u062C\u062F\u064A\u062F"),n(),o(38,"button",22),a(39),n()()(),o(40,"div",23)(41,"table",24)(42,"thead")(43,"tr")(44,"th",25),a(45,"\u0645"),n(),o(46,"th",25),a(47,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645"),n(),o(48,"th",25),a(49," \u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0627\u0644\u0643\u062A\u0631\u0648\u0646\u064A"),n(),o(50,"th",25),a(51," \u0631\u0642\u0645 \u0627\u0644\u062C\u0648\u0627\u0644"),n(),o(52,"th",25),a(53,"\u062D\u0627\u0644\u0647 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645"),n(),o(54,"th",25),a(55,"\u0627\u0644\u0627\u062F\u0648\u0627\u062A"),n()()(),o(56,"tbody"),q(57,Ne,16,5,"tr",null,M,!1,xe,5,0,"tr"),n()()(),o(60,"div",26)(61,"app-confirm-delete",27),g("toggleModal",function(){return p(l),c(r.onClose())})("onDelete",function(N){return p(l),c(r.deleteConfirmed(N))}),n()(),o(62,"app-pagination",28),g("pageChange",function(N){return p(l),c(r.onPageChanged(N))}),n()}t&2&&(u(5),s("formGroup",r.formData),u(6),s("ngIf",r.formData.controls.fullName.invalid&&r.formData.controls.fullName.touched),u(5),s("ngIf",r.formData.controls.userName.invalid&&r.formData.controls.userName.touched),u(5),s("ngIf",r.formData.controls.email.invalid&&r.formData.controls.email.touched),u(5),s("ngIf",r.formData.controls.PhoneNumber.invalid&&r.formData.controls.PhoneNumber.touched),u(12),s("ngStyle",F(13,se,r.btnText=="Add"?"#16601A":"#fd7e14")),u(),b(r.btnText=="Add"?"\u0627\u0636\u0627\u0641\u0647":"\u062A\u0639\u062F\u064A\u0644"),u(18),L(r.getAllData==null?null:r.getAllData.rows),u(3),s("ngClass",F(15,me,r.show)),u(),s("isVisible",r.show)("itemId",r.deleteId),u(),s("totalPages",r.getAllData==null||r.getAllData.paginationInfo==null?null:r.getAllData.paginationInfo.totalPagesCount)("currentPage",r.pageIndex))},dependencies:[O,$,G,W,Y,J,K,ee,X,Z,oe,re,ae],styles:['@charset "UTF-8";.checkbox[_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;-moz-appearance:none;width:20px;height:20px;border:2px solid #16601A;border-radius:4px;margin-left:5px;cursor:pointer;position:relative}.checkbox[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{font-size:12px;font-weight:400}.checkbox[_ngcontent-%COMP%]:checked:after{content:"\\2713";position:absolute;left:50%;top:-30%;transform:translate(-50%);font-size:16px;font-weight:700;color:#16601a}.modal_delete[_ngcontent-%COMP%]{opacity:0!important;visibility:hidden!important;transform:translateY(-20px)!important;position:fixed;inset:0;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:9999;transition:.5s}.modal_delete.active[_ngcontent-%COMP%]{opacity:1!important;transform:translateY(0)!important;visibility:visible!important}']})};var we=[{path:"",component:A}],E=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=S({type:i});static \u0275inj=v({imports:[k.forChild(we),k]})};var ue=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=S({type:i});static \u0275inj=v({imports:[B,E,ie]})};export{ue as NewuserModule};
