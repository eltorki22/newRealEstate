import{a as ee}from"./chunk-GAM3K2UG.js";import{a as te}from"./chunk-56NZCUGG.js";import{b as B,c as E,d as O,e as H,g as Y,k as J,l as K,r as Q,t as W}from"./chunk-SE6REB2C.js";import{a as X}from"./chunk-7RSTTL6O.js";import{a as R}from"./chunk-4IBYQYSO.js";import{a as Z}from"./chunk-MJHHVN4F.js";import{$ as l,A as _,D as y,Da as A,E as v,Q as s,Ra as j,Ta as L,Ua as $,Xa as q,Z as g,Za as z,ba as w,ca as k,da as U,ea as o,eb as G,fa as a,ga as c,ha as x,ia as M,ka as P,la as d,ma as f,mb as I,t as N,u as h,ua as r,va as b,wa as V,x as p,z as T}from"./chunk-KT3ALLZ7.js";var C=class i{constructor(){}http=p(z);apiUrl=R.apiUrl;getDataAllList(e){return this.http.post(this.apiUrl+"/api/ContactMessage/ListAsync",e)}addData(e){return this.http.post(this.apiUrl+"/api/ContactMessage/Add",e)}getUpdateData(e){return this.http.get(this.apiUrl+`/api/ContactMessage/GetById/${e}`)}updateData(e){return this.http.put(this.apiUrl+"/api/ContactMessage/Edit",e)}deleteData(e){return this.http.delete(this.apiUrl+`/api/ContactMessage/Delete/${e}`)}static \u0275fac=function(t){return new(t||i)};static \u0275prov=N({token:i,factory:i.\u0275fac,providedIn:"root"})};var oe=i=>({"background-color":i}),ae=i=>({active:i});function re(i,e){i&1&&(o(0,"small"),r(1,"\u0627\u0633\u0645 \u0627\u0644\u0631\u0633\u0627\u0644\u0647 \u0645\u0637\u0644\u0648\u0628"),a())}function se(i,e){if(i&1&&(x(0),g(1,re,2,0,"small",7),M()),i&2){let t=f();s(),l("ngIf",t.formData.controls.messageName.hasError("required"))}}function me(i,e){i&1&&(o(0,"small"),r(1," \u0645\u062D\u062A\u0648\u064A \u0627\u0644\u0631\u0633\u0627\u0644\u0647 \u0645\u0637\u0644\u0648\u0628"),a())}function le(i,e){if(i&1&&(x(0),g(1,me,2,0,"small",7),M()),i&2){let t=f();s(),l("ngIf",t.formData.controls.message.hasError("required"))}}function ue(i,e){if(i&1){let t=P();o(0,"tr")(1,"th",19),r(2),a(),o(3,"td"),r(4),a(),o(5,"td",20),r(6),a(),o(7,"td")(8,"button",21),d("click",function(){let m=y(t).$implicit,u=f();return v(u.getUpdateData(m.id))}),c(9,"i",22),a(),o(10,"button",23),d("click",function(){let m=y(t).$implicit,u=f();return v(u.deleteModel(m.id))}),c(11,"i",24),a()()()}if(i&2){let t=e.$implicit,n=e.$index;s(2),b(n+1),s(2),b(t.messageName),s(2),V(" ",t.message," ")}}function pe(i,e){i&1&&(o(0,"tr")(1,"td",25),c(2,"i",26)(3,"br"),r(4," \u0644\u0627 \u062A\u0648\u062C\u062F \u0628\u064A\u0627\u0646\u0627\u062A \u062D\u062A\u0649 \u0627\u0644\u0622\u0646 "),a()())}var D=class i{fb=p(Q);pageIndex=1;pageSize=10;msgServices=p(C);subScription;toastr=p(X);btnText="Add";idUpdate;getAllData=[];formData=this.fb.group({messageName:["",E.required],message:["",E.required]});title=p(G);ngOnInit(){this.title.setTitle("\u0646\u0645\u0648\u0630\u062C \u0627\u0644\u0631\u0633\u0627\u0626\u0644 "),this.getAllListData()}onSubmit(){let e={messageName:this.formData.get("messageName")?.value,message:this.formData.get("message")?.value};if(this.formData.valid){if(this.btnText=="Add")this.subScription=this.msgServices.addData(e).subscribe({next:t=>{this.getAllListData(),this.toastr.show("\u062A\u0645 \u0627\u0636\u0627\u0641\u0647 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0628\u0646\u062C\u0627\u062D","success")},error:t=>{if(t.error.errors){let n=t.error.errors;for(let m in n)n[m].forEach(ne=>{this.toastr.show(ne,"error")})}else this.toastr.show("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0627\u0644\u0639\u0645\u0644\u064A\u0629","error")}});else{let t={id:this.idUpdate,messageName:this.formData.get("messageName")?.value,message:this.formData.get("message")?.value};this.subScription=this.msgServices.updateData(t).subscribe(n=>{this.toastr.show("\u062A\u0645 \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0628\u0646\u062C\u0627\u062D","success"),this.getAllListData()}),this.btnText="Add"}this.formData.reset()}else this.formData.markAllAsTouched()}resetDataForm(){this.btnText="Add"}getUpdateData(e){console.log(e),this.subScription=this.msgServices.getUpdateData(e).subscribe(t=>{this.formData.patchValue({messageName:t.messageName,message:t.message})}),this.btnText="Update",this.idUpdate=e}getAllListData(){let e={pageIndex:this.pageIndex,pageSize:this.pageSize};this.subScription=this.msgServices.getDataAllList(e).subscribe(t=>{this.getAllData=t})}show=!1;deleteId;onClose(){this.show=!1}deleteModel(e){this.deleteId=e,this.show=!0}deleteConfirmed(e){this.show=!1,this.subScription=this.msgServices.deleteData(e).subscribe({next:t=>{this.getAllListData(),this.toastr.show("\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A","success")},error:t=>{this.toastr.show("\u0644\u0627 \u064A\u0645\u0643\u0646 \u062D\u0630\u0641 \u0627\u0644\u0639\u0646\u0635\u0631 \u0625\u0630\u0627 \u0643\u0627\u0646 \u0628\u0647 \u062D\u0631\u0643\u0627\u062A","error")}})}onPageChanged(e){this.pageIndex=e,this.getAllListData()}ngOnDestroy(){this.subScription&&this.subScription.unsubscribe()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=T({type:i,selectors:[["app-msgform"]],decls:41,vars:15,consts:[["appIntersection","fade-in",1,"title-page"],["src","assets/dashboard/iconarrowdouble.png","alt","icon",1,"mx-1"],["appIntersection","fade-in",1,"forms_dashboard",3,"ngSubmit","formGroup"],[1,"row"],[1,"mb-3","col-sm-12"],["for","msgname",1,"form-label"],["type","text","id","msgname","placeholder","\u0627\u0644\u0627\u0633\u0645","formControlName","messageName",1,"form-control","mt-2"],[4,"ngIf"],["for","msgcontent",1,"form-label"],["name","","id","msgcontent","placeholder","\u0627\u0643\u062A\u0628 \u0627\u0644\u0645\u062D\u062A\u0648\u064A","formControlName","message",1,"form-control",2,"height","124px","color","#7F7F7F"],[1,"btn_add_reset"],["type","reset",3,"click"],["type","submit",3,"ngStyle"],["appIntersection","fade-in",1,"table-responsive"],[1,"table","table-striped","mt-4"],["scope","col"],[1,"modal_delete",3,"ngClass"],[3,"toggleModal","onDelete","isVisible","itemId"],[3,"pageChange","totalPages","currentPage"],["scope","row"],[2,"color","#000"],[1,"btn","btn-success","ms-3",3,"click"],[1,"fa-solid","fa-pen-to-square"],[1,"btn","btn-danger",3,"click"],[1,"fa-solid","fa-trash"],["colspan","5",1,"text-center","py-5",2,"color","#888","font-size","18px"],[1,"fa-solid","fa-circle-exclamation","fa-2x","mb-2",2,"color","#ccc"]],template:function(t,n){t&1&&(o(0,"h3",0),r(1,"\u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0647 "),c(2,"img",1),o(3,"span"),r(4,"\u0646\u0645\u0648\u0630\u062C \u0627\u0644\u0631\u0633\u0627\u064A\u0644"),a()(),o(5,"form",2),d("ngSubmit",function(){return n.onSubmit()}),o(6,"div",3)(7,"div",4)(8,"label",5),r(9,"\u0627\u0644\u0627\u0633\u0645"),a(),c(10,"input",6),g(11,se,2,1,"ng-container",7),a(),o(12,"div",4)(13,"label",8),r(14,"\u0627\u0644\u0631\u0633\u0627\u0644\u0647"),a(),c(15,"textarea",9),g(16,le,2,1,"ng-container",7),a()(),o(17,"div",10)(18,"button",11),d("click",function(){return n.resetDataForm()}),r(19,"\u062C\u062F\u064A\u062F"),a(),o(20,"button",12),r(21),a()()(),o(22,"div",13)(23,"table",14)(24,"thead")(25,"tr")(26,"th",15),r(27,"\u0645"),a(),o(28,"th",15),r(29,"\u0627\u0644\u0627\u0633\u0645"),a(),o(30,"th",15),r(31,"\u0627\u0644\u0631\u0633\u0627\u0644\u0647"),a(),o(32,"th",15),r(33,"\u0627\u0644\u0627\u062F\u0648\u0627\u062A"),a()()(),o(34,"tbody"),k(35,ue,12,3,"tr",null,w,!1,pe,5,0,"tr"),a()()(),o(38,"div",16)(39,"app-confirm-delete",17),d("toggleModal",function(){return n.onClose()})("onDelete",function(u){return n.deleteConfirmed(u)}),a()(),o(40,"app-pagination",18),d("pageChange",function(u){return n.onPageChanged(u)}),a()),t&2&&(s(5),l("formGroup",n.formData),s(6),l("ngIf",n.formData.controls.messageName.invalid&&n.formData.controls.messageName.touched),s(5),l("ngIf",n.formData.controls.message.invalid&&n.formData.controls.message.touched),s(4),l("ngStyle",A(11,oe,n.btnText=="Add"?"#16601A":"#fd7e14")),s(),b(n.btnText=="Add"?"\u0627\u0636\u0627\u0641\u0647":"\u062A\u0639\u062F\u064A\u0644"),s(14),U(n.getAllData==null?null:n.getAllData.rows),s(3),l("ngClass",A(13,ae,n.show)),s(),l("isVisible",n.show)("itemId",n.deleteId),s(),l("totalPages",n.getAllData==null||n.getAllData.paginationInfo==null?null:n.getAllData.paginationInfo.totalPagesCount)("currentPage",n.pageIndex))},dependencies:[j,L,$,Y,B,O,H,J,K,ee,te,Z],styles:[".modal_delete[_ngcontent-%COMP%]{opacity:0!important;visibility:hidden!important;transform:translateY(-20px)!important;position:fixed;inset:0;background:#00000080;display:flex;justify-content:center;align-items:center;z-index:9999;transition:.5s}.modal_delete.active[_ngcontent-%COMP%]{opacity:1!important;transform:translateY(0)!important;visibility:visible!important}"]})};var ce=[{path:"",component:D}],S=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=_({type:i});static \u0275inj=h({imports:[I.forChild(ce),I]})};var ie=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=_({type:i});static \u0275inj=h({imports:[q,S,W]})};export{ie as MsgformModule};
