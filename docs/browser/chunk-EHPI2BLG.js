import{a as te}from"./chunk-EFPNG5KI.js";import{a as Y}from"./chunk-BFR2OCUX.js";import{a as Z}from"./chunk-GAM3K2UG.js";import{a as ee}from"./chunk-56NZCUGG.js";import{b as L,c as y,d as B,e as $,g as j,k as R,l as z,m as G,n as O,o as H,p as J,r as K,t as Q}from"./chunk-SE6REB2C.js";import{a as W}from"./chunk-7RSTTL6O.js";import"./chunk-4IBYQYSO.js";import{a as X}from"./chunk-MJHHVN4F.js";import{$ as r,A as E,D as v,Da as T,E as x,Q as a,Ra as M,Ta as q,Ua as V,Xa as P,Z as m,ba as F,ca as N,da as I,ea as i,eb as U,fa as e,ga as d,ha as _,ia as g,ka as k,la as f,ma as c,mb as D,u as b,ua as l,va as h,x as A,z as w}from"./chunk-KT3ALLZ7.js";var oe=u=>({"background-color":u}),le=u=>({active:u});function ae(u,n){u&1&&(i(0,"small"),l(1," \u0627\u0633\u0645 \u0627\u0644\u0645\u0648\u0638\u0641 \u0645\u0637\u0644\u0648\u0628"),e())}function re(u,n){if(u&1&&(_(0),m(1,ae,2,0,"small",7),g()),u&2){let t=c();a(),r("ngIf",t.employeeForm.controls.fullName.hasError("required"))}}function me(u,n){if(u&1&&(i(0,"option",11),l(1),e()),u&2){let t=n.$implicit;r("value",t.nationality_ar),a(),h(t.nationality_ar)}}function pe(u,n){u&1&&(i(0,"small"),l(1," \u0627\u0644\u062C\u0646\u0633\u064A\u0647 \u0645\u0637\u0644\u0648\u0628"),e())}function se(u,n){if(u&1&&(_(0),m(1,pe,2,0,"small",7),g()),u&2){let t=c();a(),r("ngIf",t.employeeForm.controls.nationality.hasError("required"))}}function de(u,n){u&1&&(i(0,"small"),l(1," \u0631\u0642\u0645 \u0627\u0644\u062A\u0644\u064A\u0641\u0648\u0646 \u0645\u0637\u0644\u0648\u0628"),e())}function ce(u,n){if(u&1&&(_(0),m(1,de,2,0,"small",7),g()),u&2){let t=c();a(),r("ngIf",t.employeeForm.controls.phoneNumber.hasError("required"))}}function fe(u,n){u&1&&(i(0,"small"),l(1," \u0627\u0644\u0627\u064A\u0645\u064A\u0644 \u0645\u0637\u0644\u0648\u0628"),e())}function ye(u,n){if(u&1&&(_(0),m(1,fe,2,0,"small",7),g()),u&2){let t=c();a(),r("ngIf",t.employeeForm.controls.email.hasError("required"))}}function _e(u,n){u&1&&(i(0,"small"),l(1," \u0646\u0648\u0639 \u0627\u0644\u0647\u0648\u064A\u0647 \u0645\u0637\u0644\u0648\u0628"),e())}function ge(u,n){if(u&1&&(_(0),m(1,_e,2,0,"small",7),g()),u&2){let t=c();a(),r("ngIf",t.employeeForm.controls.idType.hasError("required"))}}function he(u,n){u&1&&(i(0,"small"),l(1," \u0631\u0642\u0645 \u0627\u0644\u0647\u0648\u064A\u0647 \u0645\u0637\u0644\u0648\u0628"),e())}function Ae(u,n){if(u&1&&(_(0),m(1,he,2,0,"small",7),g()),u&2){let t=c();a(),r("ngIf",t.employeeForm.controls.idNumber.hasError("required"))}}function be(u,n){u&1&&(i(0,"small"),l(1," \u0627\u0644\u0631\u0627\u062A\u0628 \u0645\u0637\u0644\u0648\u0628"),e())}function Ee(u,n){if(u&1&&(_(0),m(1,be,2,0,"small",7),g()),u&2){let t=c();a(),r("ngIf",t.employeeForm.controls.salary.hasError("required"))}}function Ce(u,n){if(u&1){let t=k();i(0,"tr")(1,"th",47),l(2),e(),i(3,"td"),l(4),e(),i(5,"td"),l(6),e(),i(7,"td"),l(8),e(),i(9,"td"),l(10),e(),i(11,"td")(12,"button",48),f("click",function(){let s=v(t).$implicit,p=c();return x(p.getUpdateData(s.id))}),d(13,"i",49),e(),i(14,"button",50),f("click",function(){let s=v(t).$implicit,p=c();return x(p.deleteModel(s.id))}),d(15,"i",51),e()()()}if(u&2){let t=n.$implicit,o=n.$index;a(2),h(o+1),a(2),h(t.fullName),a(2),h(t.phoneNumber),a(2),h(t.idNumber),a(2),h(t.salary)}}function Se(u,n){u&1&&(i(0,"tr")(1,"td",52),d(2,"i",53)(3,"br"),l(4," \u0644\u0627 \u062A\u0648\u062C\u062F \u0628\u064A\u0627\u0646\u0627\u062A \u062D\u062A\u0649 \u0627\u0644\u0622\u0646 "),e()())}var C=class u{fb=A(K);fileUploadedSer=A(Y);employeesSer=A(te);pageIndex=1;pageSize=10;employeeForm;getAllData;btnText="Add";selectedFile=null;fileName="\u0646\u0633\u062E\u0647";nationality;toastr=A(W);subScription;idUpdate;title=A(U);ngOnInit(){this.title.setTitle("\u0627\u0644\u0645\u0648\u0638\u0641\u064A\u0646"),this.employeeForm=this.fb.group({fullName:["",y.required],nationality:["",y.required],phoneNumber:["",[y.required]],email:["",[y.required,y.email]],idType:["",y.required],idNumber:["",y.required],salary:["",[y.required]],idFileCopy:[null]}),this.getNationality(),this.getAllDataList()}onFileSelected(n){let t=this.fileUploadedSer.handleFileUploaded(n,this.employeeForm,"IdFileCopy");console.log(),t?(this.selectedFile=t.file,this.fileName=t.name):(this.selectedFile=null,this.fileName="")}validationNumber(n){let t=n.key.charCodeAt(0);(t<48||t>57)&&n.preventDefault()}onSubmit(){if(this.employeeForm.valid){var n=new FormData;n.append("fullName",this.employeeForm.get("fullName").value),n.append("nationality",this.employeeForm.get("nationality").value),n.append("phoneNumber",this.employeeForm.get("phoneNumber").value),n.append("email",this.employeeForm.get("email").value),n.append("idType",this.employeeForm.get("idType").value),n.append("idNumber",this.employeeForm.get("idNumber").value),n.append("salary",this.employeeForm.get("salary").value),this.selectedFile&&n.append("IdFileCopy",this.selectedFile),this.btnText=="Add"?this.subScription=this.employeesSer.addData(n).subscribe({next:t=>{this.getAllDataList(),this.toastr.show("\u062A\u0645 \u0627\u0636\u0627\u0641\u0647 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0628\u0646\u062C\u0627\u062D","success"),this.fileName=""},error:t=>{if(t.error.errors){let o=t.error.errors;for(let s in o)o[s].forEach(ne=>{this.toastr.show(ne,"error")})}else this.toastr.show("\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0627\u0644\u0639\u0645\u0644\u064A\u0629","error")}}):this.subScription=this.employeesSer.updateData(this.idUpdate,n).subscribe(t=>{this.getAllDataList(),this.toastr.show("\u062A\u0645 \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0628\u0646\u062C\u0627\u062D","success"),this.btnText="Add"}),this.employeeForm.reset()}else this.employeeForm.markAllAsTouched()}getNationality(){this.employeesSer.getNationality().subscribe(n=>{this.nationality=n.nationalities})}getAllDataList(){let n={pageIndex:this.pageIndex,pageSize:this.pageSize};this.employeesSer.getDataAllList(n).subscribe(t=>{this.getAllData={paginationInfo:t.paginationInfo,rows:t.rows.map(o=>({id:o.id,fullName:o.fullName,phoneNumber:o.phoneNumber,idNumber:o.idNumber,salary:o.salary}))}})}onPageChanged(n){this.pageIndex=n,this.getAllDataList()}ngOnDestroy(){this.subScription&&this.subScription.unsubscribe()}getUpdateData(n){console.log(n),this.btnText="Update",this.idUpdate=n,this.subScription=this.employeesSer.getUpdateData(n).subscribe(t=>{this.employeeForm.patchValue({fullName:t.fullName,nationality:t.nationality,phoneNumber:t.phoneNumber,email:t.email,idType:t.idType,idNumber:t.idNumber,salary:t.salary,idFileCopy:t.idFileCopyPath}),this.fileName=t.idFileCopyPath.split("/").pop()})}show=!1;deleteId;onClose(){this.show=!1}deleteModel(n){this.deleteId=n,this.show=!0}deleteConfirmed(n){this.subScription=this.employeesSer.deleteData(n).subscribe(t=>{this.toastr.show("\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A","success"),this.show=!1,this.getAllDataList()})}static \u0275fac=function(t){return new(t||u)};static \u0275cmp=w({type:u,selectors:[["app-employees"]],decls:102,vars:21,consts:[["appIntersection","fade-in",1,"title-page"],["src","assets/dashboard/iconarrowdouble.png","alt","icon",1,"mx-1"],["appIntersection","fade-in",1,"forms_dashboard",3,"ngSubmit","formGroup"],[1,"row"],[1,"mb-3","col-sm-12","col-md-6","col-lg-3"],["for","username",1,"form-label"],["type","text","id","username","placeholder","\u0627\u0644\u0627\u0633\u0645","formControlName","fullName",1,"form-control"],[4,"ngIf"],["for","Nationality",1,"form-label"],["id","Nationality","aria-label","Default select example","formControlName","nationality",1,"form-select"],["disabled","","selected",""],[3,"value"],["for","phonenumber",1,"form-label"],["type","text","id","phonenumber","placeholder","\u0627\u0644\u0631\u0642\u0645","formControlName","phoneNumber","maxlength","11",1,"form-control",3,"keypress"],["for","email",1,"form-label"],["type","text","id","email","placeholder","\u0627\u0644\u0627\u064A\u0645\u064A\u0644","formControlName","email",1,"form-control"],["for","Identitytype",1,"form-label"],["id","Identitytype","aria-label","Default select example","formControlName","idType",1,"form-select"],["value","","disabled","","selected",""],["value","\u0647\u0648\u064A\u0647 \u0627\u0644\u0648\u0637\u0646\u064A\u0647"],["value","\u0647\u0648\u064A\u0647 \u0645\u0642\u064A\u0645 (\u0627\u0644\u0627\u0642\u0627\u0645\u0647)"],["value","\u0647\u0648\u064A\u0647 \u0632\u0627\u0626\u0631"],["value","\u0647\u0648\u064A\u0647 \u062E\u0644\u064A\u062C\u064A\u0647 (\u0644\u0645\u0648\u0627\u0637\u0646\u064A \u062F\u0648\u0644 \u0627\u0644\u062E\u0644\u064A\u062C)"],["value","\u0647\u0648\u064A\u0647 \u0632\u0627\u0626\u0631 (\u0644\u0644\u064A\u0645\u0646\u064A\u064A\u0646)"],["value","\u0648\u062B\u064A\u0642\u0647 \u0633\u0641\u0631 \u0627\u0636\u0637\u0631\u0627\u0631\u064A\u0647 (\u0644\u0644\u0633\u0639\u0648\u062F\u064A\u064A\u0646 \u0645\u0624\u0642\u062A\u0627)"],["value","\u0628\u0637\u0627\u0642\u0647 \u0627\u0644\u0627\u062D\u0648\u0627\u0644 \u0627\u0644\u0645\u062F\u0646\u064A\u0647  (\u0642\u062F\u064A\u0645\u0647 \u0642\u0628\u0644 \u0627\u0644\u0647\u0648\u064A\u0647 \u0627\u0644\u0648\u0637\u0646\u064A\u0647)"],["value","\u0647\u0648\u064A\u0647 \u062F\u0628\u0644\u0648\u0645\u0627\u0633\u064A\u0647"],["value","\u0647\u0648\u064A\u0647 \u062E\u0627\u0635\u0647 (\u0644\u0644\u0645\u0633\u0624\u0648\u0644\u064A\u0646 \u0648\u0627\u0644\u0645\u0648\u0638\u0641\u064A\u0646 \u0627\u0644\u0631\u0633\u0645\u064A\u064A\u0646)"],["value","\u0647\u0648\u064A\u0647 \u0637\u0627\u0644\u0628 (\u0644\u0628\u0639\u0636 \u0627\u0644\u0645\u0639\u0627\u0647\u062F \u0627\u0644\u0623\u0645\u0646\u064A\u0647 \u0648\u0627\u0644\u0639\u0633\u0643\u0631\u064A\u0647)"],["for","idnumber",1,"form-label"],["type","text","id","idnumber","placeholder","\u0627\u0644\u0631\u0642\u0645","formControlName","idNumber",1,"form-control",3,"keypress"],["for","copy",1,"form-label","d-block"],["type","file","id","copy",1,"d-none",3,"change"],["for","copy",1,"form-label","d-flex","copy_identity"],[1,"icon"],[1,"fa-solid","fa-download"],["type","text","id","copy","placeholder","\u0646\u0633\u062E\u0647","readonly","",1,"form-control",2,"pointer-events","none",3,"value"],["for","salary",1,"form-label"],["type","text","id","salary","placeholder","\u0627\u0644\u0631\u0627\u062A\u0628","formControlName","salary",1,"form-control"],[1,"btn_add_reset"],["type","submit",3,"ngStyle"],["appIntersection","fade-in",1,"table-responsive"],[1,"table","table-striped","mt-4"],["scope","col"],[3,"pageChange","totalPages","currentPage"],[1,"modal_delete",3,"ngClass"],[3,"toggleModal","onDelete","isVisible","itemId"],["scope","row"],[1,"btn","btn-success","ms-3",3,"click"],[1,"fa-solid","fa-pen-to-square"],[1,"btn","btn-danger",3,"click"],[1,"fa-solid","fa-trash"],["colspan","5",1,"text-center","py-5",2,"color","#888","font-size","18px"],[1,"fa-solid","fa-circle-exclamation","fa-2x","mb-2",2,"color","#ccc"]],template:function(t,o){t&1&&(i(0,"h3",0),l(1,"\u0627\u0644\u0627\u062F\u0648\u0627\u062A "),d(2,"img",1),i(3,"span"),l(4,"\u0627\u0644\u0645\u0648\u0638\u0641\u064A\u0646"),e()(),i(5,"form",2),f("ngSubmit",function(){return o.onSubmit()}),i(6,"div",3)(7,"div",4)(8,"label",5),l(9,"\u0627\u0644\u0627\u0633\u0645"),e(),d(10,"input",6),m(11,re,2,1,"ng-container",7),e(),i(12,"div",4)(13,"label",8),l(14,"\u0627\u0644\u062C\u0646\u0633\u064A\u0647"),e(),i(15,"select",9)(16,"option",10),l(17,"\u0627\u0644\u062C\u0646\u0633\u064A\u0647"),e(),N(18,me,2,2,"option",11,F),e(),m(20,se,2,1,"ng-container",7),e(),i(21,"div",4)(22,"label",12),l(23,"\u0631\u0642\u0645 \u0627\u0644\u062C\u0648\u0627\u0644"),e(),i(24,"input",13),f("keypress",function(p){return o.validationNumber(p)}),e(),m(25,ce,2,1,"ng-container",7),e(),i(26,"div",4)(27,"label",14),l(28,"\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0627\u0644\u0643\u062A\u0631\u0648\u0646\u064A "),e(),d(29,"input",15),m(30,ye,2,1,"ng-container",7),e(),i(31,"div",4)(32,"label",16),l(33,"\u0646\u0648\u0639 \u0627\u0644\u0647\u0648\u064A\u0647 "),e(),i(34,"select",17)(35,"option",18),l(36,"\u0627\u0644\u0646\u0648\u0639"),e(),i(37,"option",19),l(38,"\u0647\u0648\u064A\u0647 \u0627\u0644\u0648\u0637\u0646\u064A\u0647"),e(),i(39,"option",20),l(40,"\u0647\u0648\u064A\u0647 \u0645\u0642\u064A\u0645 (\u0627\u0644\u0627\u0642\u0627\u0645\u0647)"),e(),i(41,"option",21),l(42,"\u0647\u0648\u064A\u0647 \u0632\u0627\u0626\u0631"),e(),i(43,"option",22),l(44,"\u0647\u0648\u064A\u0647 \u062E\u0644\u064A\u062C\u064A\u0647 (\u0644\u0645\u0648\u0627\u0637\u0646\u064A \u062F\u0648\u0644 \u0627\u0644\u062E\u0644\u064A\u062C)"),e(),i(45,"option",23),l(46,"\u0647\u0648\u064A\u0647 \u0632\u0627\u0626\u0631 (\u0644\u0644\u064A\u0645\u0646\u064A\u064A\u0646)"),e(),i(47,"option",24),l(48," \u0648\u062B\u064A\u0642\u0647 \u0633\u0641\u0631 \u0627\u0636\u0637\u0631\u0627\u0631\u064A\u0647 (\u0644\u0644\u0633\u0639\u0648\u062F\u064A\u064A\u0646 \u0645\u0624\u0642\u062A\u0627)"),e(),i(49,"option",25),l(50,"\u0628\u0637\u0627\u0642\u0647 \u0627\u0644\u0627\u062D\u0648\u0627\u0644 \u0627\u0644\u0645\u062F\u0646\u064A\u0647 (\u0642\u062F\u064A\u0645\u0647 \u0642\u0628\u0644 \u0627\u0644\u0647\u0648\u064A\u0647 \u0627\u0644\u0648\u0637\u0646\u064A\u0647)"),e(),i(51,"option",26),l(52,"\u0647\u0648\u064A\u0647 \u062F\u0628\u0644\u0648\u0645\u0627\u0633\u064A\u0647"),e(),i(53,"option",27),l(54,"\u0647\u0648\u064A\u0647 \u062E\u0627\u0635\u0647 (\u0644\u0644\u0645\u0633\u0624\u0648\u0644\u064A\u0646 \u0648\u0627\u0644\u0645\u0648\u0638\u0641\u064A\u0646 \u0627\u0644\u0631\u0633\u0645\u064A\u064A\u0646)"),e(),i(55,"option",28),l(56,"\u0647\u0648\u064A\u0647 \u0637\u0627\u0644\u0628 (\u0644\u0628\u0639\u0636 \u0627\u0644\u0645\u0639\u0627\u0647\u062F \u0627\u0644\u0623\u0645\u0646\u064A\u0647 \u0648\u0627\u0644\u0639\u0633\u0643\u0631\u064A\u0647)"),e()(),m(57,ge,2,1,"ng-container",7),e(),i(58,"div",4)(59,"label",29),l(60,"\u0631\u0642\u0645 \u0627\u0644\u0647\u0648\u064A\u0647 "),e(),i(61,"input",30),f("keypress",function(p){return o.validationNumber(p)}),e(),m(62,Ae,2,1,"ng-container",7),e(),i(63,"div",4)(64,"label",31),l(65," \u0646\u0633\u062E\u0647 \u0627\u0644\u0647\u0648\u064A\u0647 "),e(),i(66,"input",32),f("change",function(p){return o.onFileSelected(p)}),e(),i(67,"label",33)(68,"div",34),d(69,"i",35),e(),d(70,"input",36),e()(),i(71,"div",4)(72,"label",37),l(73,"\u0627\u0644\u0631\u0627\u062A\u0628 "),e(),d(74,"input",38),m(75,Ee,2,1,"ng-container",7),e()(),i(76,"div",39)(77,"button",40),l(78),e()()(),i(79,"div",41)(80,"table",42)(81,"thead")(82,"tr")(83,"th",43),l(84,"\u0645"),e(),i(85,"th",43),l(86,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0648\u0638\u0641"),e(),i(87,"th",43),l(88," \u0631\u0642\u0645 \u0627\u0644\u062C\u0648\u0627\u0644"),e(),i(89,"th",43),l(90,"\u0631\u0642\u0645 \u0627\u0644\u0647\u0648\u064A\u0647"),e(),i(91,"th",43),l(92,"\u0627\u0644\u0631\u0627\u062A\u0628"),e(),i(93,"th",43),l(94,"\u0627\u0644\u0627\u062F\u0648\u0627\u062A"),e()()(),i(95,"tbody"),N(96,Ce,16,5,"tr",null,F,!1,Se,5,0,"tr"),e()()(),i(99,"app-pagination",44),f("pageChange",function(p){return o.onPageChanged(p)}),e(),i(100,"div",45)(101,"app-confirm-delete",46),f("toggleModal",function(){return o.onClose()})("onDelete",function(p){return o.deleteConfirmed(p)}),e()()),t&2&&(a(5),r("formGroup",o.employeeForm),a(6),r("ngIf",o.employeeForm.controls.fullName.invalid&&o.employeeForm.controls.fullName.touched),a(7),I(o.nationality),a(2),r("ngIf",o.employeeForm.controls.nationality.invalid&&o.employeeForm.controls.nationality.touched),a(5),r("ngIf",o.employeeForm.controls.phoneNumber.invalid&&o.employeeForm.controls.phoneNumber.touched),a(5),r("ngIf",o.employeeForm.controls.email.invalid&&o.employeeForm.controls.email.touched),a(27),r("ngIf",o.employeeForm.controls.idType.invalid&&o.employeeForm.controls.idType.touched),a(5),r("ngIf",o.employeeForm.controls.idNumber.invalid&&o.employeeForm.controls.idNumber.touched),a(8),r("value",o.fileName),a(5),r("ngIf",o.employeeForm.controls.salary.invalid&&o.employeeForm.controls.salary.touched),a(2),r("ngStyle",T(17,oe,o.btnText=="Add"?"#16601A":"#fd7e14")),a(),h(o.btnText=="Add"?"\u062D\u0641\u0638":"\u062A\u0639\u062F\u064A\u0644"),a(18),I(o.getAllData==null?null:o.getAllData.rows),a(3),r("totalPages",o.getAllData==null||o.getAllData.paginationInfo==null?null:o.getAllData.paginationInfo.totalPagesCount)("currentPage",o.pageIndex),a(),r("ngClass",T(19,le,o.show)),a(),r("isVisible",o.show)("itemId",o.deleteId))},dependencies:[M,q,V,j,O,H,L,G,B,$,J,R,z,ee,Z,X]})};var ve=[{path:"",component:C}],S=class u{static \u0275fac=function(t){return new(t||u)};static \u0275mod=E({type:u});static \u0275inj=b({imports:[D.forChild(ve),D]})};var ie=class u{static \u0275fac=function(t){return new(t||u)};static \u0275mod=E({type:u});static \u0275inj=b({imports:[P,S,Q]})};export{ie as EmployeesModule};
